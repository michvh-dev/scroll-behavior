(()=>{"use strict";const t=t=>{let e=t;return t.targetTouches&&t.targetTouches.length>=1&&(e=t.targetTouches[0]),{y:e.clientY,x:e.clientX}};class e{constructor({vertical:t=!0,horizontal:e=!1,keyboardOffset:i=50,boundaries:s={}}={}){this.element=window,this.vertical=!0,this.horizontal=!0,this.keyboardOffset=50,this.boundaries={},this.pageX=0,this.pageY=0,this.keyBindings={down:[1,0],up:[-1,0],right:[0,1],left:[0,-1]},this.mobileConfig={pressed:!1,timeConstant:325,reference:{x:0,y:0},velocity:{x:0,y:0},frame:{x:0,y:0},target:{x:0,y:0},timestamp:0,ticker:void 0,amplitude:{x:0,y:0}},this.handleMouseScroll=t=>{t.preventDefault(),this.scroll(t.deltaX,t.deltaY)},this.handleKeyDownMove=t=>{console.log(t.key);const e=this.keyBindings[t.key];e&&this.scroll(e[0]*this.keyboardOffset,e[1]*this.keyboardOffset)},this.mobileAutoScroll=()=>{let t=0,e=0;const{amplitude:i,timestamp:s,timeConstant:o,target:r}=this.mobileConfig;if(i.x){const e=Date.now()-s;t=-i.x*Math.exp(-e/o)}if(i.y){const t=Date.now()-s;e=-i.y*Math.exp(-t/o)}t>.5||t<-.5||e>.5||e<-.5?(this.scroll(r.x+t,r.y+e),requestAnimationFrame(this.mobileAutoScroll)):this.scroll(r.x,r.y)},this.scrollEventKey="onwheel"in document.createElement("div")?"wheel":"mousewheel",this.eventWrappers=[],this.vertical=t,this.horizontal=e,this.keyboardOffset=i,this.boundaries=s,this.setEventListeners()}scroll(t,i){this.vertical&&i&&(this.pageY=this.pageY+i),this.horizontal&&t&&(this.pageX=this.pageX+t),void 0!==this.boundaries.minX&&this.pageX<this.boundaries.minX&&(this.pageX=this.boundaries.minX),void 0!==this.boundaries.maxX&&this.pageX>this.boundaries.maxX&&(this.pageX=this.boundaries.maxX),void 0!==this.boundaries.minY&&this.pageY<this.boundaries.minY&&(this.pageY=this.boundaries.minY),void 0!==this.boundaries.maxY&&this.pageY>this.boundaries.maxY&&(this.pageY=this.boundaries.maxY),this.triggerEvent(e.Events.scroll,{currentX:this.pageX,currentY:this.pageY,offsetX:t,offsetY:i})}recalculateScroll(){this.scroll()}trackMobile(){const t=Date.now(),e=t-this.mobileConfig.timestamp;this.mobileConfig.timestamp=t;const i=this.pageX-this.mobileConfig.frame.x,s=this.pageY-this.mobileConfig.frame.y;this.mobileConfig.frame.x=this.pageX,this.mobileConfig.frame.y=this.pageY;const o=1e3*i/(1+e),r=1e3*s/(1+e);this.mobileConfig.velocity.x=.8*o+.2*this.mobileConfig.velocity.x,this.mobileConfig.velocity.y=.8*r+.2*this.mobileConfig.velocity.y}mobileTouchStart(e){if(this.mobileConfig.pressed=!0,this.mobileConfig.reference=t(e),this.mobileConfig.velocity=this.mobileConfig.amplitude={x:0,y:0},this.mobileConfig.frame.x=this.pageX,this.mobileConfig.frame.y=this.pageY,this.mobileConfig.timestamp=Date.now(),clearInterval(this.mobileConfig.ticker),this.mobileConfig.ticker=setInterval(this.trackMobile,100),"A"!==e.target.nodeName)return e.preventDefault(),e.stopPropagation(),!1}mobileTouchMove(e){const{pressed:i,reference:s}=this.mobileConfig;if(i){const{x:i,y:o}=t(e);let r=s.y-o,l=s.x-i;(r>2||r<-2)&&(r=0),(l>2||l<-2)&&(l=0),s.y=o,this.scroll(l,r)}return e.preventDefault(),e.stopPropagation(),!1}mobileTouchEnd(t){const{ticker:e,amplitude:i,target:s,velocity:o}=this.mobileConfig;if(this.mobileConfig.pressed=!1,clearInterval(e),(o.x>10||o.x<-10)&&(i.x=.8*o.x,s.x=Math.round(this.pageX+i.x)),(o.y>10||o.y<-10)&&(i.y=.8*o.y,s.y=Math.round(this.pageX+i.y)),(i.x||i.y)&&(this.mobileConfig.timestamp=Date.now(),requestAnimationFrame(this.mobileAutoScroll)),t.target&&"A"!==t.target.nodeName)return t.preventDefault(),t.stopPropagation(),!1}setEventListeners(){this.element.addEventListener(this.scrollEventKey,this.handleMouseScroll,{passive:!1}),window.document.addEventListener("keydown",this.handleKeyDownMove),this.element.addEventListener("touchstart",this.mobileTouchStart,{passive:!1}),this.element.addEventListener("touchmove",this.mobileTouchMove,{passive:!1}),this.element.addEventListener("touchend",this.mobileTouchEnd,{passive:!1})}triggerEvent(t,e){document.dispatchEvent(new CustomEvent(t,{detail:e}))}on(t,i){const s=({detail:t})=>i(t);this.eventWrappers[i]=s,document.addEventListener(e.Events[t],s)}}e.Events={scroll:"virtual-scroll-event-scroll"};const i=e,s=class{constructor(t){this.targetElements=[],this.scrollElements=[],this.currentScroll=0,this.maxScrollY=0,this.config=t,this.setTargets(),this.calculateScollElements(),this.initVirtualScroll(),this.addEventListeners()}setTargets(){const{elements:t,elementSelector:e}=this.config;if(t)this.targetElements=t;else{if(!e)throw Error("dsfdsfs");this.targetElements=[...document.querySelectorAll(e)]}}setScrollPosition(){this.scrollElements.forEach(((t,e)=>{if(t.start<=this.currentScroll&&!t.hasScroll)t.target.style.transform="translateY(0)";else if(t.start<=this.currentScroll&&t.hasScroll){const e=-((this.currentScroll>t.end?t.end:this.currentScroll)-t.start);t.target.style.transform=`translateY(${e}px)`,console.log(e)}else if(t.startScroll<this.currentScroll&&t.start>this.currentScroll){var i=t.start-this.currentScroll;t.target.style.transform="translateY("+i+"px)",t.target.scrollTop=0}else t.target.style.transform="translateY("+window.innerHeight+"px)"}))}setCurrentScrollPosition(t,e=!0){t<0&&(t=0),t>this.maxScrollY&&(t=this.maxScrollY),this.currentScroll=t,e&&localStorage.setItem("home.currentScroll",`${this.currentScroll}`),this.setScrollPosition()}goToSectionId(t){var e=t.split("#")[1],i=this.scrollElements.find((t=>t.id===e));if(i)for(var s,o=i.start-this.currentScroll,r=0,l=Math.abs(o)>1e3?400:200,n=1;n<61;n++)setTimeout((()=>{var t=this.currentScroll+o/60;this.setCurrentScrollPosition(t)}),r),s=n,r=l*(s/=60)*s+0}reset(){this.scrollElements.forEach((t=>{t.target.style.transform="",t.target.style.position="",t.target.style.width="",t.target.style.left="",t.target.style.top="",t.target.style.zIndex=""})),this.scrollElements=[]}calculateScollElements(){this.maxScrollY=0;for(var t=0,e=0;e<this.targetElements.length;e++){var i=this.targetElements[e],s=t,o=s+i.scrollHeight-window.innerHeight;this.maxScrollY=o,t=s+i.scrollHeight;const r={target:i,id:i.id,startScroll:s>0?this.scrollElements[e-1].end:0,start:s,hasScroll:i.scrollHeight!==window.innerHeight,end:o};console.log(r),r.target.style.position="fixed",r.target.style.width="100%",r.target.style.left="0px",r.target.style.top="0px",r.target.style.zIndex=`${e+1}`,this.scrollElements.push(r)}this.setCurrentScrollPosition(this.currentScroll)}initVirtualScroll(){this.virtualscroll=new i({horizontal:!1,vertical:!0,keyboardOffset:50,boundaries:{minX:0,minY:0,maxX:window.innerHeight,maxY:this.maxScrollY}}),this.virtualscroll.on("scroll",(t=>{this.setCurrentScrollPosition(t.currentY)}))}addEventListeners(){window.addEventListener("resize",(()=>{this.reset(),this.calculateScollElements()}))}};new s({elementSelector:".section"}),console.log(s)})();
//# sourceMappingURL=bundle.80966666ea5d312e8969.js.map